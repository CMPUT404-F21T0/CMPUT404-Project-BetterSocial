{% extends 'bettersocial/base.html' %} {% block content %} {% if object_list %}

{% load static %}
<!-- Style Sheet and References -->
<link rel="stylesheet" type="text/css" href="{% static 'bettersocial/index.css' %}">

  {% for post in object_list %}

        <div class="post">
            <div class="post-header">
                <!-- TODO: add if user has profile pic show pic if not show icon -->
                <div class="left">
                    <a href="{% url 'bettersocial:profile' user.author.uuid %}">
                        <span class="iconify" data-icon="iconoir:profile-circled" data-width="42" data-height="42"></span>
                    </a>
                    <a href="{% url 'bettersocial:profile' user.author.uuid %}">
                        <h3>{{ post.author.user.username }}</h3>
                    </a>
                </div>

                <!-- TODO: change the link to be dynamically added and href -->
                <div class="post-header right">
                    <p>{{post.published}}</p>
                    <a href="{{post.source}}">{{post.source}}</a>
                </div>
            </div>

            <!-- TODO: add logic for type of post -->
            <div class="post-container">
                <h2 class="post-title">{{post.title}}</h2>
                <h4 class="post-publisher">By: {{post.author.display_name}}</h4>
                <p class="post-description"> {{post.description}}</p>
                <!-- remove this -->
                {{ post.content_type }}
                {{ post.uuid }}
                <!-- remove this -->
                <hr>
               
                {% if post.content_type == "application/base64" %}
                  <div class="post-content"> {{post.content}}</div>

                {% elif post.content_type == "text/markdown" %}
                  
                  <!-- <div class="post-content note" markdown="1">{{post.content}}</div> -->
                  <!-- TODO: not sure how to handle this might need to create a template filter -->
                  {% autoescape on %}
                    <span style="display:block" class="note" >{{post.content | safe}}</span>
                  {% endautoescape %}

                {% elif post.content_type == "image/jpeg;base64" or post.content_type == "image/png;base64" %}
                  <div class="image-container">
                  <img  id='base64image' src='data:{{post.content_type}}, {{post.content}}' />
                  </div>
                {% elif post.content_type == "text/plain" %}
                  <div class="post-content">{{post.content}}</div>
                {% endif %}
                <!-- </div> -->
            </div>

            <div class="post-footer right">
                <!-- TODO: Edit href for share post -->
                <a href="">
                    <span class="iconify" data-icon="bi:share" data-width="30" data-height="30"></span>
                </a>
            <a class="icon-text" href="">Share Post</a>
                <!-- TODO: Edit href for share likes and dynamically add number of likes -->
                <!-- TODO: Pluralize likes  -->
                <a href="">
                    <span class="iconify" data-icon="ant-design:like-outlined" data-width="30" data-height="30"></span>
                </a>
            <a class="icon-text" href="">Likes</a>
                <!-- TODO: Edit href for comments and dynamically add number of comments -->
                <!-- TODO: Pluralize comments  -->
                <a href="">
                    <span class="iconify" data-icon="ant-design:comment-outlined" data-width="30" data-height="30"></span>
                </a>
            <a class="icon-text" href="">Comments</a>
        </div>

        </div>
    {% endfor %}
{% else %}
<p>No posts in stream.</p>
{% endif %} 

{% endblock %}
